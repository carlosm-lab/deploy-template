# =============================================================================
# Variables de Entorno - Deploy Template
# =============================================================================
# Copia este archivo a .env.local para desarrollo local
# NUNCA commits archivos .env con secretos al repositorio
# =============================================================================

# REQUERIDO EN PRODUCCIÓN:
# Genera una clave segura con: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=

# REQUERIDO EN PRODUCCIÓN (la app FALLARÁ sin esto):
# Usa Upstash Redis (gratis): https://upstash.com/
# Formato: redis://default:PASSWORD@HOST:PORT
REDIS_URL=

# REQUERIDO EN PRODUCCIÓN (la app FALLARÁ sin esto):
# Token para proteger /healthz - genera con: python -c "import secrets; print(secrets.token_hex(16))"
# ROTACIÓN: Para rotar, genera nuevo token, actualízalo en Vercel, y redeploy.
# El endpoint no requiere downtime durante rotación si actualizas la config primero.
HEALTH_CHECK_TOKEN=

# OPCIONAL: Nombre del sitio
SITE_NAME=VercelDeploy

# RECOMENDADO EN PRODUCCIÓN: URL base para SEO files (robots.txt, sitemap.xml, security.txt)
# Si no se configura, usa http://localhost:5000 (incorrecto para producción)
# Ejemplo para Vercel: https://tu-proyecto.vercel.app
BASE_URL=

# OPCIONAL: Hosts permitidos (comma-separated). Para prevenir host header injection.
# Si no se configura, se auto-detecta desde BASE_URL + localhost en desarrollo.
# 
# Ejemplos:
#   Un solo dominio:    ALLOWED_HOSTS=tu-proyecto.vercel.app
#   Múltiples dominios: ALLOWED_HOSTS=tu-proyecto.vercel.app,www.tudominio.com,tudominio.com
#   Con preview URLs:   ALLOWED_HOSTS=tu-proyecto.vercel.app,tu-proyecto-*.vercel.app
#
# NOTA: En desarrollo, localhost y 127.0.0.1 siempre están permitidos automáticamente.
ALLOWED_HOSTS=

# RECOMENDADO EN PRODUCCIÓN: URL de contacto para security.txt (RFC 9116)
# Si no se configura, se usa un placeholder que NO cumple con el propósito de RFC 9116
# Opciones: email (mailto:security@example.com) o URL (https://example.com/security)
SECURITY_CONTACT=

# OPCIONAL: Fecha de expiración de security.txt (formato: 2027-01-01T00:00:00.000Z)
# Si no se configura, se calcula automáticamente 1 año desde el deploy
# IMPORTANTE: security.txt requiere redeploy anual para renovar expiración
SECURITY_TXT_EXPIRES=

# OPCIONAL: Habilitar modo debug (solo para desarrollo local)
FLASK_DEBUG=false

# OPCIONAL: Nivel de logs (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# OPCIONAL: Puerto del servidor (default: 5000, ignorado por Vercel)
PORT=5000

# OPCIONAL: Rutas adicionales a excluir de robots.txt (comma-separated)
# Por defecto ya se excluyen: /healthz, /ready, /status
# Ejemplo: /admin,/api/internal,/private
ROBOTS_DISALLOW=

# =============================================================================
# Configuración en Vercel Dashboard
# =============================================================================
# 1. Ve a: Vercel Dashboard > tu-proyecto > Settings > Environment Variables
# 2. Agrega las variables requeridas arriba
# 3. Scope: Production (y Preview si quieres)
# =============================================================================

# =============================================================================
# Configuración de Upstash Redis (GRATIS)
# =============================================================================
# 1. Crear cuenta en https://upstash.com/
# 2. Crear base de datos Redis
# 3. Copiar "Redis URL" (formato: redis://default:xxx@xxx.upstash.io:6379)
# 4. Agregar como REDIS_URL en Vercel
# =============================================================================

# =============================================================================
# Rotación de Credenciales REDIS_URL
# =============================================================================
# ⚠️ IMPORTANTE: La rotación de REDIS_URL afecta el rate limiting.
#
# Procedimiento de rotación:
# 1. Crear nueva base de datos Redis en Upstash (o regenerar password)
# 2. Copiar la nueva Redis URL
# 3. Actualizar REDIS_URL en Vercel Dashboard > Settings > Environment Variables
# 4. Redesplegar la aplicación
#
# Impacto durante rotación:
# - Los contadores de rate limiting se reinician (comportamiento esperado)
# - No hay pérdida de datos críticos (state es efímero)
# - Usuarios podrían recibir errores 429 si exceden límites rápidamente
#
# Recomendación: Rotar credenciales Redis cada 6-12 meses o tras compromiso.
# =============================================================================
